import { NextRequest, NextResponse } from "next/server";
export async function GET(req: NextRequest){const { searchParams }=new URL(req.url);const id=searchParams.get("id");if(!id) return NextResponse.json({error:"missing id"},{status:400});const base=process.env.WORDPRESS_BASE_URL;const user=process.env.WP_USERNAME;const pass=process.env.WP_APP_PASSWORD;const auth="Basic "+Buffer.from(`${user}:${pass}`).toString("base64");const r=await fetch(`${base}/wp-json/wp/v2/posts/${id}?_fields=yoast_head_json,link`,{headers:{Authorization:auth},cache:"no-store"});const j=await r.json();return NextResponse.json(j);}